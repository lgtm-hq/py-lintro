---
# Lintro Configuration
# https://github.com/lgtm-hq/py-lintro
#
# Lintro is the master configuration source for all tools.
# Native tool configs (.prettierrc, .yamllint, etc.) are used when available.

enforce:
  line_length: 88
  # target_python omitted - let ruff infer from requires-python in pyproject.toml

execution:
  enabled_tools: []
  tool_order: 'priority'
  fail_fast: false
  parallel: true
  max_workers: 10 # 1-32, defaults to CPU count if omitted
  auto_install_deps: true # Auto-install Node.js deps if node_modules missing

# Fallback configurations for tools without native config files.
# These are used when no native config (e.g., .prettierrc, .yamllint) is found.
defaults:
  prettier:
    semi: true
    singleQuote: true
    tabWidth: 2
    printWidth: 100
    trailingComma: 'es5'
    overrides:
      - files: '*.md'
        options:
          printWidth: 88

  markdownlint:
    MD013:
      line_length: 88
      code_blocks: false
      tables: false

  yamllint:
    extends: 'default'
    rules:
      comments-indentation: 'disable'
      comments:
        min-spaces-from-content: 1
      truthy:
        check-keys: true
      line-length:
        max: 88
        allow-non-breakable-inline-mappings: true

  hadolint:
    ignored: []
    trusted_registries:
      - 'docker.io'
      - 'gcr.io'
      - 'ghcr.io'
      - 'quay.io'
      - 'registry.hub.docker.com'

# Tool enable/disable settings.
# Full tool configs are in native files (pyproject.toml, etc.)
# or in the defaults section above.
tools:
  # Ruff - Python linter and formatter (config in pyproject.toml [tool.ruff])
  ruff:
    enabled: true

  # Black - Python formatter (uses enforce.line_length)
  black:
    enabled: true

  # Prettier - Multi-language formatter (defaults above or .prettierrc)
  prettier:
    enabled: true

  # Markdownlint - Markdown linter (defaults above or .markdownlint.yaml)
  markdownlint:
    enabled: true

  # Yamllint - YAML linter (defaults above or .yamllint)
  yamllint:
    enabled: true

  # Bandit - Security linter (config in pyproject.toml [tool.bandit])
  bandit:
    enabled: true

  # Hadolint - Dockerfile linter (defaults above or .hadolint.yaml)
  hadolint:
    enabled: true

  # Actionlint - GitHub Actions linter
  actionlint:
    enabled: true

  # Pydoclint - Python docstring linter
  pydoclint:
    enabled: true

  # Pytest - Test runner (config in pyproject.toml [tool.pytest.ini_options])
  pytest:
    enabled: true

# AI-powered issue intelligence.
# Requires: uv pip install 'lintro[ai]'
# `lintro chk` generates an AI summary (1 API call). Add --fix for
# interactive AI fix suggestions.
# `lintro fmt` generates AI fix suggestions for unfixable issues and
# a post-fix summary.
ai:
  enabled: true
  provider: anthropic
  # model: claude-sonnet-4-20250514  # uses provider default if omitted
  # api_key_env: ANTHROPIC_API_KEY   # uses provider default if omitted
  # default_fix: false      # set true to always run --fix in chk
  auto_apply: false
  auto_apply_safe_fixes: true # auto-apply deterministic style fixes (e.g. E501)
  max_tokens: 4096
  max_parallel_calls: 5 # 1-20, concurrent API calls for fix generation
  validate_after_group: false # interactive mode: re-check right after each group
  show_cost_estimate: true
